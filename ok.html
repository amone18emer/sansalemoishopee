<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopeeDeals Admin Panel - GitHub Sync</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        
        .gradient-bg { 
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); 
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .btn-animated {
            transition: all 0.3s ease;
        }
        .btn-animated:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in {
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }

        .notification {
            animation: slideInRight 0.3s ease-out;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .modal-enter {
            animation: modalSlideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes modalSlideIn {
            0% { 
                opacity: 0; 
                transform: scale(0.8) translateY(50px); 
            }
            100% { 
                opacity: 1; 
                transform: scale(1) translateY(0); 
            }
        }

        .pulse-ring {
            animation: pulse-ring 1.25s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
        }

        @keyframes pulse-ring {
            0% {
                transform: scale(.33);
            }
            80%, 100% {
                opacity: 0;
            }
        }

        .sidebar {
            transition: all 0.3s ease;
        }

        .sidebar.collapsed {
            width: 80px;
        }

        .sidebar.collapsed .sidebar-text {
            display: none;
        }

        .sidebar.collapsed .sidebar-icon {
            margin: 0 auto;
        }

        .content-area {
            transition: all 0.3s ease;
        }

        .content-area.expanded {
            margin-left: 80px;
        }

        .stats-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .stats-card.orange {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
        }

        .stats-card.green {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .stats-card.red {
            background: linear-gradient(135deg, #fc466b 0%, #3f5efb 100%);
        }

        .stats-card.yellow {
            background: linear-gradient(135deg, #fdbb2d 0%, #22c1c3 100%);
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #6366f1;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .github-connected {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .github-disconnected {
            background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center gradient-bg">
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 fade-in">
            <div class="text-center mb-8">
                <div class="w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4 relative">
                    <span class="text-4xl">‚öôÔ∏è</span>
                    <div class="absolute inset-0 rounded-full bg-purple-500 opacity-20 pulse-ring"></div>
                </div>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">ShopeeDeals Admin</h1>
                <p class="text-gray-600">Qu·∫£n l√Ω website v·ªõi GitHub Sync</p>
            </div>
            
            <div class="space-y-6">
                <div class="relative">
                    <input type="text" id="adminUsername" placeholder="T√™n ƒëƒÉng nh·∫≠p" class="w-full border-2 border-gray-200 rounded-xl px-4 py-4 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                        <span class="text-gray-400">üë§</span>
                    </div>
                </div>
                <div class="relative">
                    <input type="password" id="adminPassword" placeholder="M·∫≠t kh·∫©u" class="w-full border-2 border-gray-200 rounded-xl px-4 py-4 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                        <span class="text-gray-400">üîí</span>
                    </div>
                </div>
                <button onclick="adminLogin()" class="w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-4 rounded-xl font-semibold btn-animated text-lg">
                    üöÄ ƒêƒÉng Nh·∫≠p
                </button>
            </div>
            
            <div class="mt-8 p-4 bg-blue-50 rounded-xl text-sm text-blue-700">
                <div class="flex items-center mb-2">
                    <span class="text-blue-500 mr-2">üí°</span>
                    <strong>Th√¥ng tin ƒëƒÉng nh·∫≠p demo:</strong>
                </div>
                <div class="ml-6 space-y-1">
                    <div>T√™n ƒëƒÉng nh·∫≠p: <code class="bg-blue-100 px-2 py-1 rounded">admin</code></div>
                    <div>M·∫≠t kh·∫©u: <code class="bg-blue-100 px-2 py-1 rounded">123456</code></div>
                </div>
            </div>
        </div>
    </div>

    <!-- GitHub Settings Modal -->
    <div id="githubModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl max-w-2xl w-full modal-enter">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-gray-800 rounded-xl flex items-center justify-center">
                                <span class="text-white text-2xl">üêô</span>
                            </div>
                            <div>
                                <h3 class="text-2xl font-bold text-gray-800">C√†i ƒê·∫∑t GitHub</h3>
                                <p class="text-gray-600">K·∫øt n·ªëi v·ªõi repository ƒë·ªÉ ƒë·ªìng b·ªô d·ªØ li·ªáu</p>
                            </div>
                        </div>
                        <button onclick="closeGitHubModal()" class="text-gray-400 hover:text-gray-600 text-2xl">‚úï</button>
                    </div>
                </div>
                <div class="p-6">
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">GitHub Personal Access Token *</label>
                            <input type="password" id="githubToken" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            <p class="text-xs text-gray-500 mt-1">
                                <a href="https://github.com/settings/tokens" target="_blank" class="text-blue-500 hover:underline">
                                    üîó T·∫°o token t·∫°i ƒë√¢y
                                </a> - C·∫ßn quy·ªÅn: repo, contents
                            </p>
                        </div>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Repository Owner</label>
                                <input type="text" id="githubOwner" value="amone18emer" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Repository Name</label>
                                <input type="text" id="githubRepo" value="sansalemoishopee" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Branch</label>
                            <input type="text" id="githubBranch" value="main" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                        </div>
                        <div class="flex space-x-4">
                            <button onclick="testGitHubConnection()" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-xl font-semibold btn-animated">
                                üîç Test K·∫øt N·ªëi
                            </button>
                            <button onclick="saveGitHubSettings()" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-3 rounded-xl font-semibold btn-animated">
                                üíæ L∆∞u C√†i ƒê·∫∑t
                            </button>
                        </div>
                    </div>
                    
                    <div class="mt-8 p-4 bg-yellow-50 rounded-xl">
                        <h4 class="font-bold text-yellow-800 mb-2">üìã H∆∞·ªõng D·∫´n T·∫°o GitHub Token:</h4>
                        <ol class="text-sm text-yellow-700 space-y-1 list-decimal list-inside">
                            <li>V√†o <a href="https://github.com/settings/tokens" target="_blank" class="text-blue-600 hover:underline">GitHub Settings ‚Üí Developer settings ‚Üí Personal access tokens</a></li>
                            <li>Click "Generate new token (classic)"</li>
                            <li>Ch·ªçn quy·ªÅn: <code class="bg-yellow-100 px-1 rounded">repo</code> v√† <code class="bg-yellow-100 px-1 rounded">contents</code></li>
                            <li>Copy token v√† paste v√†o √¥ tr√™n</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="hidden min-h-screen bg-gray-50">
        <!-- Sidebar -->
        <div id="sidebar" class="sidebar fixed left-0 top-0 h-full w-64 bg-white shadow-lg z-40">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center sidebar-icon">
                        <span class="text-purple-600 font-bold text-xl">‚öôÔ∏è</span>
                    </div>
                    <div class="sidebar-text">
                        <h1 class="text-xl font-bold text-gray-800">Admin Panel</h1>
                        <p class="text-sm text-gray-500">ShopeeDeals</p>
                    </div>
                </div>
            </div>

            <nav class="mt-6">
                <div class="px-4 space-y-2">
                    <button onclick="showTab('dashboard')" class="nav-btn w-full flex items-center space-x-3 px-4 py-3 text-left rounded-lg hover:bg-purple-50 hover:text-purple-600 transition-colors bg-purple-50 text-purple-600">
                        <span class="text-xl sidebar-icon">üìä</span>
                        <span class="sidebar-text font-medium">Dashboard</span>
                    </button>
                    <button onclick="showTab('products')" class="nav-btn w-full flex items-center space-x-3 px-4 py-3 text-left rounded-lg hover:bg-purple-50 hover:text-purple-600 transition-colors text-gray-600">
                        <span class="text-xl sidebar-icon">üõçÔ∏è</span>
                        <span class="sidebar-text font-medium">S·∫£n Ph·∫©m</span>
                    </button>
                    <button onclick="showTab('categories')" class="nav-btn w-full flex items-center space-x-3 px-4 py-3 text-left rounded-lg hover:bg-purple-50 hover:text-purple-600 transition-colors text-gray-600">
                        <span class="text-xl sidebar-icon">üè™</span>
                        <span class="sidebar-text font-medium">Danh M·ª•c</span>
                    </button>
                    <button onclick="showTab('vouchers')" class="nav-btn w-full flex items-center space-x-3 px-4 py-3 text-left rounded-lg hover:bg-purple-50 hover:text-purple-600 transition-colors text-gray-600">
                        <span class="text-xl sidebar-icon">üé´</span>
                        <span class="sidebar-text font-medium">Voucher</span>
                    </button>
                    <button onclick="showTab('flashsales')" class="nav-btn w-full flex items-center space-x-3 px-4 py-3 text-left rounded-lg hover:bg-purple-50 hover:text-purple-600 transition-colors text-gray-600">
                        <span class="text-xl sidebar-icon">üî•</span>
                        <span class="sidebar-text font-medium">Flash Sale</span>
                    </button>
                    <button onclick="showTab('categoryproducts')" class="nav-btn w-full flex items-center space-x-3 px-4 py-3 text-left rounded-lg hover:bg-purple-50 hover:text-purple-600 transition-colors text-gray-600">
                        <span class="text-xl sidebar-icon">üì¶</span>
                        <span class="sidebar-text font-medium">S·∫£n Ph·∫©m Theo Danh M·ª•c</span>
                    </button>
                    <button onclick="showTab('backup')" class="nav-btn w-full flex items-center space-x-3 px-4 py-3 text-left rounded-lg hover:bg-purple-50 hover:text-purple-600 transition-colors text-gray-600">
                        <span class="text-xl sidebar-icon">üíæ</span>
                        <span class="sidebar-text font-medium">Backup</span>
                    </button>
                </div>
            </nav>

            <div class="absolute bottom-4 left-4 right-4">
                <button onclick="toggleSidebar()" class="w-full flex items-center justify-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">
                    <span id="toggleIcon">‚óÄ</span>
                    <span class="sidebar-text text-sm">Thu g·ªçn</span>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div id="mainContent" class="content-area ml-64">
            <!-- Header -->
            <header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-30">
                <div class="px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <h2 id="pageTitle" class="text-2xl font-bold text-gray-800">Dashboard</h2>
                            <p class="text-gray-600">Qu·∫£n l√Ω website ShopeeDeals v·ªõi GitHub Sync</p>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div id="githubStatus" class="flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium github-disconnected text-white">
                                <span>üêô</span>
                                <span>GitHub: Ch∆∞a k·∫øt n·ªëi</span>
                            </div>
                            <button onclick="syncToGitHub()" class="flex items-center space-x-2 bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg transition-colors btn-animated">
                                <span>üöÄ</span>
                                <span>Sync GitHub</span>
                            </button>
                            <button onclick="openMainSite()" class="flex items-center space-x-2 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors btn-animated">
                                <span>üåê</span>
                                <span>Xem Website</span>
                            </button>
                            <button onclick="showGitHubSettings()" class="flex items-center space-x-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors btn-animated">
                                <span>‚öôÔ∏è</span>
                                <span>GitHub</span>
                            </button>
                            <button onclick="adminLogout()" class="flex items-center space-x-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors btn-animated">
                                <span>üö™</span>
                                <span>ƒêƒÉng Xu·∫•t</span>
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="p-6">
                <!-- Dashboard Tab -->
                <div id="dashboardTab" class="tab-content">
                    <!-- GitHub Status Card -->
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">üêô Tr·∫°ng Th√°i GitHub</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <div class="flex items-center space-x-3 mb-4">
                                    <div id="connectionIndicator" class="w-4 h-4 bg-red-500 rounded-full"></div>
                                    <span id="connectionText" class="font-medium text-gray-800">Ch∆∞a k·∫øt n·ªëi GitHub</span>
                                </div>
                                <div class="space-y-2 text-sm text-gray-600">
                                    <p>üìÅ Repository: <span id="repoInfo">Ch∆∞a c·∫•u h√¨nh</span></p>
                                    <p>üåø Branch: <span id="branchInfo">Ch∆∞a c·∫•u h√¨nh</span></p>
                                    <p>üïí L·∫ßn sync cu·ªëi: <span id="lastSync">Ch∆∞a c√≥</span></p>
                                </div>
                            </div>
                            <div class="flex flex-col space-y-3">
                                <button onclick="showGitHubSettings()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium btn-animated">
                                    ‚öôÔ∏è C·∫•u H√¨nh GitHub
                                </button>
                                <button onclick="syncToGitHub()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg font-medium btn-animated" disabled>
                                    üöÄ ƒê·ªìng B·ªô Ngay
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Stats Cards -->
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="stats-card text-white rounded-2xl p-6 card-hover">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-white text-opacity-80 text-sm font-medium">S·∫£n Ph·∫©m</p>
                                    <p id="productCount" class="text-3xl font-bold">0</p>
                                    <p class="text-white text-opacity-60 text-xs mt-1">T·ªïng s·∫£n ph·∫©m</p>
                                </div>
                                <div class="w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center">
                                    <span class="text-2xl">üõçÔ∏è</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stats-card orange text-white rounded-2xl p-6 card-hover">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-white text-opacity-80 text-sm font-medium">Danh M·ª•c</p>
                                    <p id="categoryCount" class="text-3xl font-bold">0</p>
                                    <p class="text-white text-opacity-60 text-xs mt-1">Danh m·ª•c s·∫£n ph·∫©m</p>
                                </div>
                                <div class="w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center">
                                    <span class="text-2xl">üè™</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stats-card green text-white rounded-2xl p-6 card-hover">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-white text-opacity-80 text-sm font-medium">Voucher</p>
                                    <p id="voucherCount" class="text-3xl font-bold">0</p>
                                    <p class="text-white text-opacity-60 text-xs mt-1">M√£ gi·∫£m gi√°</p>
                                </div>
                                <div class="w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center">
                                    <span class="text-2xl">üé´</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stats-card red text-white rounded-2xl p-6 card-hover">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-white text-opacity-80 text-sm font-medium">Flash Sale</p>
                                    <p id="flashSaleCount" class="text-3xl font-bold">0</p>
                                    <p class="text-white text-opacity-60 text-xs mt-1">Khuy·∫øn m√£i hot</p>
                                </div>
                                <div class="w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center">
                                    <span class="text-2xl">üî•</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">üöÄ Thao T√°c Nhanh</h3>
                        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <button onclick="showTab('products')" class="flex flex-col items-center p-4 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors card-hover">
                                <span class="text-3xl mb-2">‚ûï</span>
                                <span class="font-medium text-gray-800">Th√™m S·∫£n Ph·∫©m</span>
                            </button>
                            <button onclick="showTab('categories')" class="flex flex-col items-center p-4 bg-green-50 hover:bg-green-100 rounded-xl transition-colors card-hover">
                                <span class="text-3xl mb-2">üè™</span>
                                <span class="font-medium text-gray-800">T·∫°o Danh M·ª•c</span>
                            </button>
                            <button onclick="showTab('vouchers')" class="flex flex-col items-center p-4 bg-yellow-50 hover:bg-yellow-100 rounded-xl transition-colors card-hover">
                                <span class="text-3xl mb-2">üé´</span>
                                <span class="font-medium text-gray-800">T·∫°o Voucher</span>
                            </button>
                            <button onclick="showTab('flashsales')" class="flex flex-col items-center p-4 bg-red-50 hover:bg-red-100 rounded-xl transition-colors card-hover">
                                <span class="text-3xl mb-2">üî•</span>
                                <span class="font-medium text-gray-800">Flash Sale</span>
                            </button>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">üìà Ho·∫°t ƒê·ªông G·∫ßn ƒê√¢y</h3>
                        <div id="recentActivity" class="space-y-4">
                            <!-- Activity items will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Products Tab -->
                <div id="productsTab" class="tab-content hidden">
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">‚ûï Th√™m S·∫£n Ph·∫©m M·ªõi</h3>
                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">T√™n s·∫£n ph·∫©m *</label>
                                <input type="text" id="productName" placeholder="VD: √Åo thun nam cao c·∫•p" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Gi√° b√°n *</label>
                                <input type="text" id="productPrice" placeholder="VD: 299,000ƒë" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Gi√° g·ªëc</label>
                                <input type="text" id="productOriginalPrice" placeholder="VD: 599,000ƒë" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Link affiliate Shopee *</label>
                                <input type="url" id="productLink" placeholder="https://shopee.vn/..." class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">M√¥ t·∫£ s·∫£n ph·∫©m</label>
                            <textarea id="productDescription" placeholder="M√¥ t·∫£ chi ti·∫øt v·ªÅ s·∫£n ph·∫©m..." class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all h-32"></textarea>
                        </div>
                        <button onclick="addProduct()" class="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-8 py-3 rounded-xl font-semibold btn-animated">
                            ‚ú® Th√™m S·∫£n Ph·∫©m
                        </button>
                    </div>

                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">üìã Danh S√°ch S·∫£n Ph·∫©m</h3>
                        <div id="productsList" class="space-y-4">
                            <!-- Products will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Categories Tab -->
                <div id="categoriesTab" class="tab-content hidden">
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">üè™ Th√™m Danh M·ª•c M·ªõi</h3>
                        <div class="grid md:grid-cols-3 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">T√™n danh m·ª•c *</label>
                                <input type="text" id="categoryName" placeholder="VD: Th·ªùi Trang" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Icon (emoji) *</label>
                                <input type="text" id="categoryIcon" placeholder="VD: üëï" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">M√†u n·ªÅn *</label>
                                <select id="categoryColor" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                                    <option value="">Ch·ªçn m√†u n·ªÅn</option>
                                    <option value="orange">üü† Cam</option>
                                    <option value="blue">üîµ Xanh d∆∞∆°ng</option>
                                    <option value="green">üü¢ Xanh l√°</option>
                                    <option value="pink">ü©∑ H·ªìng</option>
                                    <option value="purple">üü£ T√≠m</option>
                                    <option value="yellow">üü° V√†ng</option>
                                    <option value="red">üî¥ ƒê·ªè</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">M√¥ t·∫£ danh m·ª•c</label>
                            <textarea id="categoryDescription" placeholder="M√¥ t·∫£ v·ªÅ danh m·ª•c s·∫£n ph·∫©m..." class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all h-24"></textarea>
                        </div>
                        <button onclick="addCategory()" class="bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-3 rounded-xl font-semibold btn-animated">
                            üè™ T·∫°o Danh M·ª•c
                        </button>
                    </div>

                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">üìÇ Danh S√°ch Danh M·ª•c</h3>
                        <div id="categoriesList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <!-- Categories will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Vouchers Tab -->
                <div id="vouchersTab" class="tab-content hidden">
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">üé´ T·∫°o Voucher M·ªõi</h3>
                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">M√£ voucher *</label>
                                <input type="text" id="voucherCode" placeholder="VD: FREESHIP50" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Gi·∫£m gi√° *</label>
                                <input type="text" id="voucherDiscount" placeholder="VD: 50k" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ƒêi·ªÅu ki·ªán √°p d·ª•ng *</label>
                                <input type="text" id="voucherCondition" placeholder="VD: ƒê∆°n t·ª´ 200k" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ng√†y h·∫øt h·∫°n *</label>
                                <input type="date" id="voucherExpiry" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                        </div>
                        <button onclick="addVoucher()" class="bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white px-8 py-3 rounded-xl font-semibold btn-animated">
                            üé´ T·∫°o Voucher
                        </button>
                    </div>

                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">üéüÔ∏è Danh S√°ch Voucher</h3>
                        <div id="vouchersList" class="space-y-4">
                            <!-- Vouchers will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Flash Sales Tab -->
                <div id="flashsalesTab" class="tab-content hidden">
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">üî• T·∫°o Flash Sale M·ªõi</h3>
                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">T√™n s·∫£n ph·∫©m *</label>
                                <input type="text" id="flashSaleProduct" placeholder="VD: √Åo thun premium" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Gi√° flash sale *</label>
                                <input type="text" id="flashSalePrice" placeholder="VD: 199k" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Gi√° g·ªëc *</label>
                                <input type="text" id="flashSaleOriginal" placeholder="VD: 399k" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Link Shopee *</label>
                                <input type="url" id="flashSaleLink" placeholder="https://shopee.vn/..." class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Th·ªùi gian k·∫øt th√∫c *</label>
                                <input type="time" id="flashSaleTime" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">S·ªë l∆∞·ª£ng c√≤n l·∫°i *</label>
                                <input type="number" id="flashSaleQuantity" placeholder="VD: 50" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                        </div>
                        <button onclick="addFlashSale()" class="bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white px-8 py-3 rounded-xl font-semibold btn-animated">
                            üî• T·∫°o Flash Sale
                        </button>
                    </div>

                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">‚ö° Danh S√°ch Flash Sale</h3>
                        <div id="flashSalesList" class="space-y-4">
                            <!-- Flash sales will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Category Products Tab -->
                <div id="categoryproductsTab" class="tab-content hidden">
                    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">üì¶ Th√™m S·∫£n Ph·∫©m V√†o Danh M·ª•c</h3>
                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ch·ªçn danh m·ª•c *</label>
                                <select id="categoryProductCategory" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                                    <option value="">Ch·ªçn danh m·ª•c</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">T√™n s·∫£n ph·∫©m *</label>
                                <input type="text" id="categoryProductName" placeholder="VD: √Åo s∆° mi nam" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Gi√° b√°n *</label>
                                <input type="text" id="categoryProductPrice" placeholder="VD: 199k" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Gi√° g·ªëc</label>
                                <input type="text" id="categoryProductOriginal" placeholder="VD: 299k" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Link Shopee *</label>
                                <input type="url" id="categoryProductLink" placeholder="https://shopee.vn/..." class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">M√¥ t·∫£ s·∫£n ph·∫©m</label>
                            <textarea id="categoryProductDescription" placeholder="M√¥ t·∫£ chi ti·∫øt v·ªÅ s·∫£n ph·∫©m..." class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all h-24"></textarea>
                        </div>
                        <button onclick="addCategoryProduct()" class="bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-8 py-3 rounded-xl font-semibold btn-animated">
                            üì¶ Th√™m V√†o Danh M·ª•c
                        </button>
                    </div>

                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">üìã S·∫£n Ph·∫©m Theo Danh M·ª•c</h3>
                        <div id="categoryProductsList">
                            <!-- Category products will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Backup Tab -->
                <div id="backupTab" class="tab-content hidden">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-3xl">üíæ</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800 mb-3">Backup D·ªØ Li·ªáu</h3>
                                <p class="text-gray-600 mb-6">T·∫£i xu·ªëng to√†n b·ªô d·ªØ li·ªáu website ƒë·ªÉ l∆∞u tr·ªØ an to√†n</p>
                                <button onclick="backupData()" class="bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-semibold btn-animated">
                                    üì• T·∫£i Backup
                                </button>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-3xl">üì§</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800 mb-3">Restore D·ªØ Li·ªáu</h3>
                                <p class="text-gray-600 mb-6">Kh√¥i ph·ª•c d·ªØ li·ªáu website t·ª´ file backup ƒë√£ l∆∞u</p>
                                <input type="file" id="restoreFile" accept=".json" class="hidden" onchange="restoreData(this)">
                                <button onclick="document.getElementById('restoreFile').click()" class="bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white px-6 py-3 rounded-xl font-semibold btn-animated">
                                    üì§ Ch·ªçn File Backup
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-2xl shadow-lg p-6 mt-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">‚ö†Ô∏è L∆∞u √ù Quan Tr·ªçng</h3>
                        <div class="space-y-4 text-gray-600">
                            <div class="flex items-start space-x-3">
                                <span class="text-blue-500 mt-1">üí°</span>
                                <p><strong>Backup th∆∞·ªùng xuy√™n:</strong> N√™n backup d·ªØ li·ªáu √≠t nh·∫•t 1 tu·∫ßn/l·∫ßn ƒë·ªÉ ƒë·∫£m b·∫£o an to√†n.</p>
                            </div>
                            <div class="flex items-start space-x-3">
                                <span class="text-yellow-500 mt-1">‚ö†Ô∏è</span>
                                <p><strong>Restore c·∫©n th·∫≠n:</strong> Vi·ªác restore s·∫Ω ghi ƒë√® to√†n b·ªô d·ªØ li·ªáu hi·ªán t·∫°i.</p>
                            </div>
                            <div class="flex items-start space-x-3">
                                <span class="text-green-500 mt-1">‚úÖ</span>
                                <p><strong>ƒê·ªãnh d·∫°ng file:</strong> Ch·ªâ ch·∫•p nh·∫≠n file .json ƒë∆∞·ª£c t·∫°o t·ª´ h·ªá th·ªëng n√†y.</p>
                            </div>
                            <div class="flex items-start space-x-3">
                                <span class="text-purple-500 mt-1">üöÄ</span>
                                <p><strong>GitHub Sync:</strong> Sau khi restore, nh·ªõ ƒë·ªìng b·ªô l√™n GitHub ƒë·ªÉ c·∫≠p nh·∫≠t website online.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let isLoggedIn = false;
        let productIdCounter = 1000;
        let voucherIdCounter = 100;
        let flashSaleIdCounter = 100;
        let categoryIdCounter = 100;
        let categoryProductIdCounter = 1000;
        let sidebarCollapsed = false;
        let githubSettings = {};

        // GitHub API Functions
        async function syncToGitHub() {
            if (!githubSettings.token) {
                showNotification('‚ö†Ô∏è Vui l√≤ng c·∫•u h√¨nh GitHub tr∆∞·ªõc!', 'warning');
                showGitHubSettings();
                return;
            }

            const syncButton = document.querySelector('button[onclick="syncToGitHub()"]');
            const originalText = syncButton.innerHTML;
            syncButton.innerHTML = '<div class="loading-spinner"></div> ƒêang ƒë·ªìng b·ªô...';
            syncButton.disabled = true;

            try {
                const data = loadDataFromStorage();
                
                // Create data.js content
                const dataContent = `// ShopeeDeals Data - Auto generated by Admin Panel
// Last updated: ${new Date().toISOString()}

window.shopeeDealsData = ${JSON.stringify(data, null, 2)};

// Initialize data if localStorage is empty
if (!localStorage.getItem('shopeedeals_products')) {
    localStorage.setItem('shopeedeals_products', JSON.stringify(window.shopeeDealsData.products || []));
}
if (!localStorage.getItem('shopeedeals_categories')) {
    localStorage.setItem('shopeedeals_categories', JSON.stringify(window.shopeeDealsData.categories || []));
}
if (!localStorage.getItem('shopeedeals_vouchers')) {
    localStorage.setItem('shopeedeals_vouchers', JSON.stringify(window.shopeeDealsData.vouchers || []));
}
if (!localStorage.getItem('shopeedeals_flashsales')) {
    localStorage.setItem('shopeedeals_flashsales', JSON.stringify(window.shopeeDealsData.flashSales || []));
}
if (!localStorage.getItem('shopeedeals_categoryproducts')) {
    localStorage.setItem('shopeedeals_categoryproducts', JSON.stringify(window.shopeeDealsData.categoryProducts || {}));
}`;

                // Get current file SHA (required for updates)
                const getFileResponse = await fetch(`https://api.github.com/repos/${githubSettings.owner}/${githubSettings.repo}/contents/data.js`, {
                    headers: {
                        'Authorization': `token ${githubSettings.token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });

                let sha = null;
                if (getFileResponse.ok) {
                    const fileData = await getFileResponse.json();
                    sha = fileData.sha;
                }

                // Update or create file
                const updateResponse = await fetch(`https://api.github.com/repos/${githubSettings.owner}/${githubSettings.repo}/contents/data.js`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${githubSettings.token}`,
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: `Update data.js - ${new Date().toLocaleString('vi-VN')}`,
                        content: btoa(unescape(encodeURIComponent(dataContent))),
                        sha: sha,
                        branch: githubSettings.branch
                    })
                });

                if (updateResponse.ok) {
                    localStorage.setItem('github_last_sync', new Date().toISOString());
                    updateGitHubStatus();
                    showNotification('üöÄ ƒê·ªìng b·ªô GitHub th√†nh c√¥ng! Website s·∫Ω c·∫≠p nh·∫≠t trong v√†i ph√∫t.', 'success');
                } else {
                    const error = await updateResponse.json();
                    throw new Error(error.message || 'GitHub API error');
                }

            } catch (error) {
                console.error('GitHub sync error:', error);
                showNotification(`‚ùå L·ªói ƒë·ªìng b·ªô GitHub: ${error.message}`, 'error');
            } finally {
                syncButton.innerHTML = originalText;
                syncButton.disabled = false;
            }
        }

        async function testGitHubConnection() {
            const token = document.getElementById('githubToken').value.trim();
            const owner = document.getElementById('githubOwner').value.trim();
            const repo = document.getElementById('githubRepo').value.trim();

            if (!token || !owner || !repo) {
                showNotification('‚ö†Ô∏è Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!', 'warning');
                return;
            }

            const testButton = document.querySelector('button[onclick="testGitHubConnection()"]');
            const originalText = testButton.innerHTML;
            testButton.innerHTML = '<div class="loading-spinner"></div> ƒêang test...';
            testButton.disabled = true;

            try {
                const response = await fetch(`https://api.github.com/repos/${owner}/${repo}`, {
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });

                if (response.ok) {
                    const repoData = await response.json();
                    showNotification(`‚úÖ K·∫øt n·ªëi th√†nh c√¥ng v·ªõi ${repoData.full_name}!`, 'success');
                } else {
                    const error = await response.json();
                    throw new Error(error.message || 'Repository not found');
                }
            } catch (error) {
                showNotification(`‚ùå L·ªói k·∫øt n·ªëi: ${error.message}`, 'error');
            } finally {
                testButton.innerHTML = originalText;
                testButton.disabled = false;
            }
        }

        function saveGitHubSettings() {
            const token = document.getElementById('githubToken').value.trim();
            const owner = document.getElementById('githubOwner').value.trim();
            const repo = document.getElementById('githubRepo').value.trim();
            const branch = document.getElementById('githubBranch').value.trim();

            if (!token || !owner || !repo || !branch) {
                showNotification('‚ö†Ô∏è Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!', 'warning');
                return;
            }

            githubSettings = { token, owner, repo, branch };
            localStorage.setItem('github_settings', JSON.stringify(githubSettings));
            
            updateGitHubStatus();
            closeGitHubModal();
            showNotification('üíæ ƒê√£ l∆∞u c√†i ƒë·∫∑t GitHub th√†nh c√¥ng!', 'success');
        }

        function loadGitHubSettings() {
            const saved = localStorage.getItem('github_settings');
            if (saved) {
                githubSettings = JSON.parse(saved);
                document.getElementById('githubToken').value = githubSettings.token || '';
                document.getElementById('githubOwner').value = githubSettings.owner || 'amone18emer';
                document.getElementById('githubRepo').value = githubSettings.repo || 'sansalemoishopee';
                document.getElementById('githubBranch').value = githubSettings.branch || 'main';
            }
            updateGitHubStatus();
        }

        function updateGitHubStatus() {
            const statusDiv = document.getElementById('githubStatus');
            const connectionIndicator = document.getElementById('connectionIndicator');
            const connectionText = document.getElementById('connectionText');
            const repoInfo = document.getElementById('repoInfo');
            const branchInfo = document.getElementById('branchInfo');
            const lastSync = document.getElementById('lastSync');
            const syncButton = document.querySelector('button[onclick="syncToGitHub()"]');

            if (githubSettings.token) {
                statusDiv.className = statusDiv.className.replace('github-disconnected', 'github-connected');
                statusDiv.innerHTML = '<span>üêô</span><span>GitHub: ƒê√£ k·∫øt n·ªëi</span>';
                
                connectionIndicator.className = 'w-4 h-4 bg-green-500 rounded-full';
                connectionText.textContent = 'ƒê√£ k·∫øt n·ªëi GitHub';
                repoInfo.textContent = `${githubSettings.owner}/${githubSettings.repo}`;
                branchInfo.textContent = githubSettings.branch;
                
                const lastSyncTime = localStorage.getItem('github_last_sync');
                if (lastSyncTime) {
                    lastSync.textContent = new Date(lastSyncTime).toLocaleString('vi-VN');
                } else {
                    lastSync.textContent = 'Ch∆∞a ƒë·ªìng b·ªô l·∫ßn n√†o';
                }
                
                syncButton.disabled = false;
            } else {
                statusDiv.className = statusDiv.className.replace('github-connected', 'github-disconnected');
                statusDiv.innerHTML = '<span>üêô</span><span>GitHub: Ch∆∞a k·∫øt n·ªëi</span>';
                
                connectionIndicator.className = 'w-4 h-4 bg-red-500 rounded-full';
                connectionText.textContent = 'Ch∆∞a k·∫øt n·ªëi GitHub';
                repoInfo.textContent = 'Ch∆∞a c·∫•u h√¨nh';
                branchInfo.textContent = 'Ch∆∞a c·∫•u h√¨nh';
                lastSync.textContent = 'Ch∆∞a c√≥';
                
                syncButton.disabled = true;
            }
        }

        function showGitHubSettings() {
            document.getElementById('githubModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeGitHubModal() {
            document.getElementById('githubModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // Login Functions
        function adminLogin() {
            const username = document.getElementById('adminUsername').value.trim();
            const password = document.getElementById('adminPassword').value.trim();

            if (username === 'admin' && password === '123456') {
                isLoggedIn = true;
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('adminDashboard').classList.remove('hidden');
                loadDashboard();
                loadGitHubSettings();
                showNotification('üéâ ƒêƒÉng nh·∫≠p th√†nh c√¥ng! Ch√†o m·ª´ng Admin', 'success');
            } else {
                const loginForm = document.querySelector('#loginScreen .bg-white');
                loginForm.classList.add('shake');
                setTimeout(() => loginForm.classList.remove('shake'), 500);
                showNotification('‚ùå Sai t√™n ƒëƒÉng nh·∫≠p ho·∫∑c m·∫≠t kh·∫©u!', 'error');
            }
        }

        function adminLogout() {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t?')) {
                isLoggedIn = false;
                document.getElementById('loginScreen').classList.remove('hidden');
                document.getElementById('adminDashboard').classList.add('hidden');
                document.getElementById('adminUsername').value = '';
                document.getElementById('adminPassword').value = '';
                showNotification('üëã ƒê√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng!', 'info');
            }
        }

        // Sidebar Functions
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const toggleIcon = document.getElementById('toggleIcon');
            
            sidebarCollapsed = !sidebarCollapsed;
            
            if (sidebarCollapsed) {
                sidebar.classList.add('collapsed');
                mainContent.classList.add('expanded');
                toggleIcon.textContent = '‚ñ∂';
            } else {
                sidebar.classList.remove('collapsed');
                mainContent.classList.remove('expanded');
                toggleIcon.textContent = '‚óÄ';
            }
        }

        // Data Management
        function loadDataFromStorage() {
            return {
                products: JSON.parse(localStorage.getItem('shopeedeals_products') || '[]'),
                vouchers: JSON.parse(localStorage.getItem('shopeedeals_vouchers') || '[]'),
                flashSales: JSON.parse(localStorage.getItem('shopeedeals_flashsales') || '[]'),
                categories: JSON.parse(localStorage.getItem('shopeedeals_categories') || '[]'),
                categoryProducts: JSON.parse(localStorage.getItem('shopeedeals_categoryproducts') || '{}')
            };
        }

        function saveDataToStorage(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
            updateStats();
            updateRecentActivity();
        }

        function openMainSite() {
            window.open('https://amone18emer.github.io/sansalemoishopee/', '_blank');
        }

        // Dashboard Functions
        function loadDashboard() {
            updateStats();
            loadProducts();
            loadCategories();
            loadVouchers();
            loadFlashSales();
            loadCategoryProducts();
            updateRecentActivity();
            loadCategoryOptions();
        }

        function updateStats() {
            const data = loadDataFromStorage();
            document.getElementById('productCount').textContent = data.products.length;
            document.getElementById('categoryCount').textContent = data.categories.length;
            document.getElementById('voucherCount').textContent = data.vouchers.length;
            document.getElementById('flashSaleCount').textContent = data.flashSales.length;
        }

        function updateRecentActivity() {
            const activities = [
                { icon: 'üõçÔ∏è', text: 'C·∫≠p nh·∫≠t danh s√°ch s·∫£n ph·∫©m', time: '2 ph√∫t tr∆∞·ªõc' },
                { icon: 'üé´', text: 'Th√™m voucher FREESHIP50', time: '15 ph√∫t tr∆∞·ªõc' },
                { icon: 'üî•', text: 'T·∫°o flash sale m·ªõi', time: '1 gi·ªù tr∆∞·ªõc' },
                { icon: 'üè™', text: 'Th√™m danh m·ª•c Th·ªùi Trang', time: '2 gi·ªù tr∆∞·ªõc' },
                { icon: 'üöÄ', text: 'ƒê·ªìng b·ªô d·ªØ li·ªáu l√™n GitHub', time: '1 ng√†y tr∆∞·ªõc' }
            ];

            const activityContainer = document.getElementById('recentActivity');
            activityContainer.innerHTML = '';

            activities.forEach(activity => {
                const activityItem = document.createElement('div');
                activityItem.className = 'flex items-center space-x-4 p-4 bg-gray-50 rounded-xl';
                activityItem.innerHTML = `
                    <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                        <span class="text-xl">${activity.icon}</span>
                    </div>
                    <div class="flex-1">
                        <p class="font-medium text-gray-800">${activity.text}</p>
                        <p class="text-sm text-gray-500">${activity.time}</p>
                    </div>
                `;
                activityContainer.appendChild(activityItem);
            });
        }

        // Tab Management
        function showTab(tabName) {
            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'products': 'Qu·∫£n L√Ω S·∫£n Ph·∫©m',
                'categories': 'Qu·∫£n L√Ω Danh M·ª•c',
                'vouchers': 'Qu·∫£n L√Ω Voucher',
                'flashsales': 'Qu·∫£n L√Ω Flash Sale',
                'categoryproducts': 'S·∫£n Ph·∫©m Theo Danh M·ª•c',
                'backup': 'Backup & Restore'
            };
            document.getElementById('pageTitle').textContent = titles[tabName] || 'Dashboard';

            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active state from all nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-purple-50', 'text-purple-600');
                btn.classList.add('text-gray-600');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
            
            // Add active state to selected nav button
            event.target.classList.remove('text-gray-600');
            event.target.classList.add('bg-purple-50', 'text-purple-600');

            // Load specific data for the tab
            if (tabName === 'categoryproducts') {
                loadCategoryOptions();
            }
        }

        // Product Management
        function loadProducts() {
            const { products } = loadDataFromStorage();
            const productsList = document.getElementById('productsList');
            productsList.innerHTML = '';
            
            if (products.length === 0) {
                productsList.innerHTML = `
                    <div class="text-center py-12">
                        <div class="text-6xl mb-4">üì¶</div>
                        <h3 class="text-xl font-bold text-gray-600 mb-2">Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o</h3>
                        <p class="text-gray-500">H√£y th√™m s·∫£n ph·∫©m ƒë·∫ßu ti√™n c·ªßa b·∫°n!</p>
                    </div>
                `;
                return;
            }
            
            products.forEach(product => {
                const discount = product.originalPrice ? 
                    Math.round((parseInt(product.originalPrice.replace(/[^\d]/g, '')) - parseInt(product.price.replace(/[^\d]/g, ''))) / parseInt(product.originalPrice.replace(/[^\d]/g, '')) * 100) : 0;

                const productCard = document.createElement('div');
                productCard.className = 'bg-gray-50 rounded-xl p-6 card-hover';
                productCard.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-2">
                                <h4 class="font-bold text-gray-800 text-lg">${product.name}</h4>
                                ${discount > 0 ? `<span class="bg-red-100 text-red-600 px-2 py-1 rounded-full text-xs font-bold">-${discount}%</span>` : ''}
                            </div>
                            <p class="text-gray-600 mb-3">${product.description}</p>
                            <div class="flex items-center space-x-3 mb-3">
                                <span class="text-xl font-bold text-orange-600">${product.price}</span>
                                ${product.originalPrice ? `<span class="text-gray-400 line-through">${product.originalPrice}</span>` : ''}
                            </div>
                            <div class="flex items-center space-x-2 text-sm text-gray-500">
                                <span>üîó</span>
                                <span class="truncate max-w-xs">${product.link}</span>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2 ml-4">
                            <button onclick="editProduct(${product.id})" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                ‚úèÔ∏è S·ª≠a
                            </button>
                            <button onclick="deleteProduct(${product.id})" class="bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                üóëÔ∏è X√≥a
                            </button>
                        </div>
                    </div>
                `;
                productsList.appendChild(productCard);
            });
        }

        function addProduct() {
            const name = document.getElementById('productName').value.trim();
            const price = document.getElementById('productPrice').value.trim();
            const originalPrice = document.getElementById('productOriginalPrice').value.trim();
            const link = document.getElementById('productLink').value.trim();
            const description = document.getElementById('productDescription').value.trim();

            if (!name || !price || !link) {
                showNotification('‚ö†Ô∏è Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫Øt bu·ªôc!', 'warning');
                return;
            }

            const { products } = loadDataFromStorage();
            const newProduct = {
                id: ++productIdCounter,
                name,
                price,
                originalPrice,
                link,
                description: description || 'S·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng cao',
                image: 'üõçÔ∏è'
            };

            products.push(newProduct);
            saveDataToStorage('shopeedeals_products', products);
            
            // Clear form
            document.getElementById('productName').value = '';
            document.getElementById('productPrice').value = '';
            document.getElementById('productOriginalPrice').value = '';
            document.getElementById('productLink').value = '';
            document.getElementById('productDescription').value = '';

            loadProducts();
            showNotification('üéâ ƒê√£ th√™m s·∫£n ph·∫©m th√†nh c√¥ng! Nh·ªõ ƒë·ªìng b·ªô l√™n GitHub.', 'success');
        }

        function editProduct(id) {
            const { products } = loadDataFromStorage();
            const product = products.find(p => p.id === id);
            if (!product) return;

            // Fill form with product data
            document.getElementById('productName').value = product.name;
            document.getElementById('productPrice').value = product.price;
            document.getElementById('productOriginalPrice').value = product.originalPrice || '';
            document.getElementById('productLink').value = product.link;
            document.getElementById('productDescription').value = product.description;

            // Delete the old product
            deleteProduct(id, false);
            
            showNotification('üìù S·∫£n ph·∫©m ƒë√£ ƒë∆∞·ª£c t·∫£i v√†o form ƒë·ªÉ ch·ªânh s·ª≠a', 'info');
        }

        function deleteProduct(id, showConfirm = true) {
            if (showConfirm && !confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s·∫£n ph·∫©m n√†y?')) return;
            
            const { products } = loadDataFromStorage();
            const updatedProducts = products.filter(p => p.id !== id);
            saveDataToStorage('shopeedeals_products', updatedProducts);
            loadProducts();
            
            if (showConfirm) {
                showNotification('üóëÔ∏è ƒê√£ x√≥a s·∫£n ph·∫©m th√†nh c√¥ng! Nh·ªõ ƒë·ªìng b·ªô l√™n GitHub.', 'success');
            }
        }

        // Category Management
        function loadCategories() {
            const { categories } = loadDataFromStorage();
            const categoriesList = document.getElementById('categoriesList');
            categoriesList.innerHTML = '';
            
            if (categories.length === 0) {
                categoriesList.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="text-6xl mb-4">üè™</div>
                        <h3 class="text-xl font-bold text-gray-600 mb-2">Ch∆∞a c√≥ danh m·ª•c n√†o</h3>
                        <p class="text-gray-500">H√£y t·∫°o danh m·ª•c ƒë·∫ßu ti√™n c·ªßa b·∫°n!</p>
                    </div>
                `;
                return;
            }
            
            categories.forEach(category => {
                const { categoryProducts } = loadDataFromStorage();
                const productsCount = (categoryProducts[category.id] || []).length;

                const categoryCard = document.createElement('div');
                categoryCard.className = `bg-${category.color}-50 border-2 border-${category.color}-200 rounded-xl p-6 text-center relative card-hover`;
                categoryCard.innerHTML = `
                    <div class="text-5xl mb-3">${category.icon}</div>
                    <h4 class="font-bold text-gray-800 mb-2 text-lg">${category.name}</h4>
                    <p class="text-gray-600 text-sm mb-3">${category.description}</p>
                    <div class="text-xs text-gray-500 mb-4">
                        üì¶ ${productsCount} s·∫£n ph·∫©m
                    </div>
                    <div class="flex justify-center space-x-2">
                        <button onclick="editCategory(${category.id})" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-lg text-xs font-medium transition-colors">
                            ‚úèÔ∏è S·ª≠a
                        </button>
                        <button onclick="deleteCategory(${category.id})" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg text-xs font-medium transition-colors">
                            üóëÔ∏è X√≥a
                        </button>
                    </div>
                `;
                categoriesList.appendChild(categoryCard);
            });
        }

        function loadCategoryOptions() {
            const { categories } = loadDataFromStorage();
            const select = document.getElementById('categoryProductCategory');
            select.innerHTML = '<option value="">Ch·ªçn danh m·ª•c</option>';
            
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.id;
                option.textContent = `${category.icon} ${category.name}`;
                select.appendChild(option);
            });
        }

        function addCategory() {
            const name = document.getElementById('categoryName').value.trim();
            const icon = document.getElementById('categoryIcon').value.trim();
            const color = document.getElementById('categoryColor').value;
            const description = document.getElementById('categoryDescription').value.trim();

            if (!name || !icon || !color) {
                showNotification('‚ö†Ô∏è Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫Øt bu·ªôc!', 'warning');
                return;
            }

            const { categories } = loadDataFromStorage();
            const { categoryProducts } = loadDataFromStorage();
            
            const newCategory = {
                id: ++categoryIdCounter,
                name,
                icon,
                color,
                description: description || 'Danh m·ª•c s·∫£n ph·∫©m m·ªõi'
            };

            categories.push(newCategory);
            categoryProducts[newCategory.id] = [];
            
            saveDataToStorage('shopeedeals_categories', categories);
            saveDataToStorage('shopeedeals_categoryproducts', categoryProducts);
            
            // Clear form
            document.getElementById('categoryName').value = '';
            document.getElementById('categoryIcon').value = '';
            document.getElementById('categoryColor').value = '';
            document.getElementById('categoryDescription').value = '';

            loadCategories();
            loadCategoryOptions();
            showNotification('üè™ ƒê√£ t·∫°o danh m·ª•c th√†nh c√¥ng! Nh·ªõ ƒë·ªìng b·ªô l√™n GitHub.', 'success');
        }

        function editCategory(id) {
            const { categories } = loadDataFromStorage();
            const category = categories.find(c => c.id === id);
            if (!category) return;

            // Fill form with category data
            document.getElementById('categoryName').value = category.name;
            document.getElementById('categoryIcon').value = category.icon;
            document.getElementById('categoryColor').value = category.color;
            document.getElementById('categoryDescription').value = category.description;

            // Delete the old category
            deleteCategory(id, false);
            
            showNotification('üìù Danh m·ª•c ƒë√£ ƒë∆∞·ª£c t·∫£i v√†o form ƒë·ªÉ ch·ªânh s·ª≠a', 'info');
        }

        function deleteCategory(id, showConfirm = true) {
            if (showConfirm && !confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a danh m·ª•c n√†y? T·∫•t c·∫£ s·∫£n ph·∫©m trong danh m·ª•c c≈©ng s·∫Ω b·ªã x√≥a.')) return;
            
            const { categories } = loadDataFromStorage();
            const { categoryProducts } = loadDataFromStorage();
            
            const updatedCategories = categories.filter(c => c.id !== id);
            delete categoryProducts[id];
            
            saveDataToStorage('shopeedeals_categories', updatedCategories);
            saveDataToStorage('shopeedeals_categoryproducts', categoryProducts);
            
            loadCategories();
            loadCategoryOptions();
            loadCategoryProducts();
            
            if (showConfirm) {
                showNotification('üóëÔ∏è ƒê√£ x√≥a danh m·ª•c th√†nh c√¥ng! Nh·ªõ ƒë·ªìng b·ªô l√™n GitHub.', 'success');
            }
        }

        // Voucher Management
        function loadVouchers() {
            const { vouchers } = loadDataFromStorage();
            const vouchersList = document.getElementById('vouchersList');
            vouchersList.innerHTML = '';
            
            if (vouchers.length === 0) {
                vouchersList.innerHTML = `
                    <div class="text-center py-12">
                        <div class="text-6xl mb-4">üé´</div>
                        <h3 class="text-xl font-bold text-gray-600 mb-2">Ch∆∞a c√≥ voucher n√†o</h3>
                        <p class="text-gray-500">H√£y t·∫°o voucher ƒë·∫ßu ti√™n c·ªßa b·∫°n!</p>
                    </div>
                `;
                return;
            }
            
            vouchers.forEach(voucher => {
                const voucherCard = document.createElement('div');
                voucherCard.className = 'bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-dashed border-yellow-300 rounded-xl p-6 card-hover';
                voucherCard.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center space-x-3 mb-3">
                                <span class="bg-yellow-500 text-white px-4 py-2 rounded-full font-bold">${voucher.code}</span>
                                <span class="text-yellow-600 font-bold text-lg">Gi·∫£m ${voucher.discount}</span>
                            </div>
                            <div class="space-y-2 text-gray-600">
                                <p class="flex items-center space-x-2">
                                    <span>üìã</span>
                                    <span>${voucher.condition}</span>
                                </p>
                                <p class="flex items-center space-x-2">
                                    <span>‚è∞</span>
                                    <span>H·∫øt h·∫°n: ${voucher.expiry}</span>
                                </p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2 ml-4">
                            <button onclick="editVoucher(${voucher.id})" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                ‚úèÔ∏è S·ª≠a
                            </button>
                            <button onclick="deleteVoucher(${voucher.id})" class="bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                üóëÔ∏è X√≥a
                            </button>
                        </div>
                    </div>
                `;
                vouchersList.appendChild(voucherCard);
            });
        }

        function addVoucher() {
            const code = document.getElementById('voucherCode').value.trim();
            const discount = document.getElementById('voucherDiscount').value.trim();
            const condition = document.getElementById('voucherCondition').value.trim();
            const expiry = document.getElementById('voucherExpiry').value;

            if (!code || !discount || !condition || !expiry) {
                showNotification('‚ö†Ô∏è Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin voucher!', 'warning');
                return;
            }

            const { vouchers } = loadDataFromStorage();
            const newVoucher = {
                id: ++voucherIdCounter,
                code: code.toUpperCase(),
                discount,
                condition,
                expiry
            };

            vouchers.push(newVoucher);
            saveDataToStorage('shopeedeals_vouchers', vouchers);
            
            // Clear form
            document.getElementById('voucherCode').value = '';
            document.getElementById('voucherDiscount').value = '';
            document.getElementById('voucherCondition').value = '';
            document.getElementById('voucherExpiry').value = '';

            loadVouchers();
            showNotification('üé´ ƒê√£ t·∫°o voucher th√†nh c√¥ng! Nh·ªõ ƒë·ªìng b·ªô l√™n GitHub.', 'success');
        }

        function editVoucher(id) {
            const { vouchers } = loadDataFromStorage();
            const voucher = vouchers.find(v => v.id === id);
            if (!voucher) return;

            // Fill form with voucher data
            document.getElementById('voucherCode').value = voucher.code;
            document.getElementById('voucherDiscount').value = voucher.discount;
            document.getElementById('voucherCondition').value = voucher.condition;
            document.getElementById('voucherExpiry').value = voucher.expiry;

            // Delete the old voucher
            deleteVoucher(id, false);
            
            showNotification('üìù Voucher ƒë√£ ƒë∆∞·ª£c t·∫£i v√†o form ƒë·ªÉ ch·ªânh s·ª≠a', 'info');
        }

        function deleteVoucher(id, showConfirm = true) {
            if (showConfirm && !confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a voucher n√†y?')) return;
            
            const { vouchers } = loadDataFromStorage();
            const updatedVouchers = vouchers.filter(v => v.id !== id);
            saveDataToStorage('shopeedeals_vouchers', updatedVouchers);
            loadVouchers();
            
            if (showConfirm) {
                showNotification('üóëÔ∏è ƒê√£ x√≥a voucher th√†nh c√¥ng! Nh·ªõ ƒë·ªìng b·ªô l√™n GitHub.', 'success');
            }
        }

        // Flash Sale Management
        function loadFlashSales() {
            const { flashSales } = loadDataFromStorage();
            const flashSalesList = document.getElementById('flashSalesList');
            flashSalesList.innerHTML = '';
            
            if (flashSales.length === 0) {
                flashSalesList.innerHTML = `
                    <div class="text-center py-12">
                        <div class="text-6xl mb-4">üî•</div>
                        <h3 class="text-xl font-bold text-gray-600 mb-2">Ch∆∞a c√≥ flash sale n√†o</h3>
                        <p class="text-gray-500">H√£y t·∫°o flash sale ƒë·∫ßu ti√™n c·ªßa b·∫°n!</p>
                    </div>
                `;
                return;
            }
            
            flashSales.forEach(sale => {
                const discount = Math.round((parseInt(sale.original.replace(/[^\d]/g, '')) - parseInt(sale.price.replace(/[^\d]/g, ''))) / parseInt(sale.original.replace(/[^\d]/g, '')) * 100);
                
                const saleCard = document.createElement('div');
                saleCard.className = 'bg-gradient-to-r from-red-50 to-pink-50 border-2 border-red-200 rounded-xl p-6 card-hover';
                saleCard.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center space-x-3 mb-3">
                                <span class="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold">-${discount}%</span>
                                <h4 class="font-bold text-gray-800 text-lg">${sale.product}</h4>
                            </div>
                            <div class="flex items-center space-x-4 mb-3">
                                <span class="text-red-600 font-bold text-xl">${sale.price}</span>
                                <span class="text-gray-400 line-through">${sale.original}</span>
                            </div>
                            <div class="space-y-2 text-gray-600 text-sm">
                                <p class="flex items-center space-x-2">
                                    <span>‚è∞</span>
                                    <span>K·∫øt th√∫c l√∫c ${sale.time}</span>
                                </p>
                                <p class="flex items-center space-x-2">
                                    <span>üì¶</span>
                                    <span>C√≤n l·∫°i: ${sale.quantity} s·∫£n ph·∫©m</span>
                                </p>
                                <p class="flex items-center space-x-2">
                                    <span>üîó</span>
                                    <span class="truncate max-w-xs">${sale.link}</span>
                                </p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2 ml-4">
                            <button onclick="editFlashSale(${sale.id})" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                ‚úèÔ∏è S·ª≠a
                            </button>
                            <button onclick="deleteFlashSale(${sale.id})" class="bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                üóëÔ∏è X√≥a
                            </button>
                        </div>
                    </div>
                `;
                flashSalesList.appendChild(saleCard);
            });
        }

        function addFlashSale() {
            const product = document.getElementById('flashSaleProduct').value.trim();
            const price = document.getElementById('flashSalePrice').value.trim();
            const original = document.getElementById('flashSaleOriginal').value.trim();
            const link = document.getElementById('flashSaleLink').value.trim();
            const time = document.getElementById('flashSaleTime').value;
            const quantity = document.getElementById('flashSaleQuantity').value;

            if (!product || !price || !original || !link || !time || !quantity) {
                showNotification('‚ö†Ô∏è Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin flash sale!', 'warning');
                return;
            }

            const { flashSales } = loadDataFromStorage();
            const newFlashSale = {
                id: ++flashSaleIdCounter,
                product,
                price,
                original,
                link,
                time,
                quantity: parseInt(quantity)
            };

            flashSales.push(newFlashSale);
            saveDataToStorage('shopeedeals_flashsales', flashSales);
            
            // Clear form
            document.getElementById('flashSaleProduct').value = '';
            document.getElementById('flashSalePrice').value = '';
            document.getElementById('flashSaleOriginal').value = '';
            document.getElementById('flashSaleLink').value = '';
            document.getElementById('flashSaleTime').value = '';
            document.getElementById('flashSaleQuantity').value = '';

            loadFlashSales();
            showNotification('üî• ƒê√£ t·∫°o flash sale th√†nh c√¥ng! Nh·ªõ ƒë·ªìng b·ªô l√™n GitHub.', 'success');
        }

        function editFlashSale(id) {
            const { flashSales } = loadDataFromStorage();
            const sale = flashSales.find(s => s.id === id);
            if (!sale) return;

            // Fill form with flash sale data
            document.getElementById('flashSaleProduct').value = sale.product;
            document.getElementById('flashSalePrice').value = sale.price;
            document.getElementById('flashSaleOriginal').value = sale.original;
            document.getElementById('flashSaleLink').value = sale.link;
            document.getElementById('flashSaleTime').value = sale.time;
            document.getElementById('flashSaleQuantity').value = sale.quantity;

            // Delete the old flash sale
            deleteFlashSale(id, false);
            
            showNotification('üìù Flash sale ƒë√£ ƒë∆∞·ª£c t·∫£i v√†o form ƒë·ªÉ ch·ªânh s·ª≠a', 'info');
        }

        function deleteFlashSale(id, showConfirm = true) {
            if (showConfirm && !confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a flash sale n√†y?')) return;
            
            const { flashSales } = loadDataFromStorage();
            const updatedFlashSales = flashSales.filter(s => s.id !== id);
            saveDataToStorage('shopeedeals_flashsales', updatedFlashSales);
            loadFlashSales();
            
            if (showConfirm) {
                showNotification('üóëÔ∏è ƒê√£ x√≥a flash sale th√†nh c√¥ng! Nh·ªõ ƒë·ªìng b·ªô l√™n GitHub.', 'success');
            }
        }

        // Category Products Management
        function loadCategoryProducts() {
            const { categories, categoryProducts } = loadDataFromStorage();
            const container = document.getElementById('categoryProductsList');
            container.innerHTML = '';

            if (categories.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12">
                        <div class="text-6xl mb-4">üè™</div>
                        <h3 class="text-xl font-bold text-gray-600 mb-2">Ch∆∞a c√≥ danh m·ª•c n√†o</h3>
                        <p class="text-gray-500">H√£y t·∫°o danh m·ª•c tr∆∞·ªõc khi th√™m s·∫£n ph·∫©m!</p>
                    </div>
                `;
                return;
            }

            categories.forEach(category => {
                const products = categoryProducts[category.id] || [];
                
                const categorySection = document.createElement('div');
                categorySection.className = 'mb-8';
                categorySection.innerHTML = `
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-12 h-12 bg-${category.color}-100 rounded-lg flex items-center justify-center">
                            <span class="text-2xl">${category.icon}</span>
                        </div>
                        <div>
                            <h4 class="text-xl font-bold text-gray-800">${category.name}</h4>
                            <p class="text-gray-600">${products.length} s·∫£n ph·∫©m</p>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4" id="category-${category.id}-products">
                        ${products.length === 0 ? `
                            <div class="col-span-full text-center py-8 bg-gray-50 rounded-xl">
                                <div class="text-4xl mb-2">üì¶</div>
                                <p class="text-gray-500">Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o trong danh m·ª•c n√†y</p>
                            </div>
                        ` : ''}
                    </div>
                `;
                container.appendChild(categorySection);

                // Load products for this category
                const productsGrid = document.getElementById(`category-${category.id}-products`);
                products.forEach(product => {
                    const discount = product.original ? Math.round((parseInt(product.original.replace(/[^\d]/g, '')) - parseInt(product.price.replace(/[^\d]/g, ''))) / parseInt(product.original.replace(/[^\d]/g, '')) * 100) : 0;
                    
                    const productCard = document.createElement('div');
                    productCard.className = 'bg-white rounded-xl p-4 shadow-sm card-hover';
                    productCard.innerHTML = `
                        <div class="mb-3">
                            <div class="flex items-center justify-between mb-2">
                                <h5 class="font-bold text-gray-800">${product.name}</h5>
                                ${discount > 0 ? `<span class="bg-red-100 text-red-600 px-2 py-1 rounded-full text-xs font-bold">-${discount}%</span>` : ''}
                            </div>
                            <p class="text-gray-600 text-sm mb-2">${product.description}</p>
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="font-bold text-orange-600">${product.price}</span>
                                ${product.original ? `<span class="text-gray-400 line-through text-sm">${product.original}</span>` : ''}
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <button onclick="editCategoryProduct(${category.id}, ${product.id})" class="bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-xs">
                                ‚úèÔ∏è S·ª≠a
                            </button>
                            <button onclick="deleteCategoryProduct(${category.id}, ${product.id})" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs">
                                üóëÔ∏è X√≥a
                            </button>
                        </div>
                    `;
                    productsGrid.appendChild(productCard);
                });
            });
        }

        function addCategoryProduct() {
            const categoryId = parseInt(document.getElementById('categoryProductCategory').value);
            const name = document.getElementById('categoryProductName').value.trim();
            const price = document.getElementById('categoryProductPrice').value.trim();
            const original = document.getElementById('categoryProductOriginal').value.trim();
            const link = document.getElementById('categoryProductLink').value.trim();
            const description = document.getElementById('categoryProductDescription').value.trim();

            if (!categoryId || !name || !price || !link) {
                showNotification('‚ö†Ô∏è Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫Øt bu·ªôc!', 'warning');
                return;
            }

            const { categoryProducts } = loadDataFromStorage();
            if (!categoryProducts[categoryId]) {
                categoryProducts[categoryId] = [];
            }

            const newProduct = {
                id: ++categoryProductIdCounter,
                name,
                price,
                original,
                link,
                description: description || 'S·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng cao'
            };

            categoryProducts[categoryId].push(newProduct);
            saveDataToStorage('shopeedeals_categoryproducts', categoryProducts);
            
            // Clear form
            document.getElementById('categoryProductCategory').value = '';
            document.getElementById('categoryProductName').value = '';
            document.getElementById('categoryProductPrice').value = '';
            document.getElementById('categoryProductOriginal').value = '';
            document.getElementById('categoryProductLink').value = '';
            document.getElementById('categoryProductDescription').value = '';

            loadCategoryProducts();
            showNotification('üì¶ ƒê√£ th√™m s·∫£n ph·∫©m v√†o danh m·ª•c th√†nh c√¥ng! Nh·ªõ ƒë·ªìng b·ªô l√™n GitHub.', 'success');
        }

        function editCategoryProduct(categoryId, productId) {
            const { categoryProducts } = loadDataFromStorage();
            const products = categoryProducts[categoryId] || [];
            const product = products.find(p => p.id === productId);
            if (!product) return;

            // Fill form with product data
            document.getElementById('categoryProductCategory').value = categoryId;
            document.getElementById('categoryProductName').value = product.name;
            document.getElementById('categoryProductPrice').value = product.price;
            document.getElementById('categoryProductOriginal').value = product.original || '';
            document.getElementById('categoryProductLink').value = product.link;
            document.getElementById('categoryProductDescription').value = product.description;

            // Delete the old product
            deleteCategoryProduct(categoryId, productId, false);
            
            showNotification('üìù S·∫£n ph·∫©m ƒë√£ ƒë∆∞·ª£c t·∫£i v√†o form ƒë·ªÉ ch·ªânh s·ª≠a', 'info');
        }

        function deleteCategoryProduct(categoryId, productId, showConfirm = true) {
            if (showConfirm && !confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s·∫£n ph·∫©m n√†y kh·ªèi danh m·ª•c?')) return;
            
            const { categoryProducts } = loadDataFromStorage();
            if (categoryProducts[categoryId]) {
                categoryProducts[categoryId] = categoryProducts[categoryId].filter(p => p.id !== productId);
                saveDataToStorage('shopeedeals_categoryproducts', categoryProducts);
                loadCategoryProducts();
                
                if (showConfirm) {
                    showNotification('üóëÔ∏è ƒê√£ x√≥a s·∫£n ph·∫©m kh·ªèi danh m·ª•c th√†nh c√¥ng! Nh·ªõ ƒë·ªìng b·ªô l√™n GitHub.', 'success');
                }
            }
        }

        // Backup & Restore
        function backupData() {
            const data = loadDataFromStorage();
            const backup = {
                ...data,
                timestamp: new Date().toISOString(),
                version: '1.0'
            };
            
            const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `shopeedeals-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('üíæ Backup ƒë√£ ƒë∆∞·ª£c t·∫£i xu·ªëng th√†nh c√¥ng!', 'success');
        }

        function restoreData(input) {
            const file = input.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const backup = JSON.parse(e.target.result);
                    
                    // Validate backup structure
                    if (!backup.products || !backup.categories || !backup.vouchers || !backup.flashSales) {
                        throw new Error('Invalid backup file format');
                    }
                    
                    if (!confirm('‚ö†Ô∏è Vi·ªác restore s·∫Ω ghi ƒë√® to√†n b·ªô d·ªØ li·ªáu hi·ªán t·∫°i. B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ti·∫øp t·ª•c?')) {
                        return;
                    }
                    
                    // Restore data
                    localStorage.setItem('shopeedeals_products', JSON.stringify(backup.products));
                    localStorage.setItem('shopeedeals_categories', JSON.stringify(backup.categories));
                    localStorage.setItem('shopeedeals_vouchers', JSON.stringify(backup.vouchers));
                    localStorage.setItem('shopeedeals_flashsales', JSON.stringify(backup.flashSales));
                    localStorage.setItem('shopeedeals_categoryproducts', JSON.stringify(backup.categoryProducts || {}));
                    
                    loadDashboard();
                    showNotification('üì§ D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c kh√¥i ph·ª•c th√†nh c√¥ng! Nh·ªõ ƒë·ªìng b·ªô l√™n GitHub.', 'success');
                } catch (error) {
                    showNotification('‚ùå L·ªói: File backup kh√¥ng h·ª£p l·ªá!', 'error');
                }
            };
            reader.readAsText(file);
            
            // Reset input
            input.value = '';
        }

        // Utility Functions
        function showNotification(message, type = 'info') {
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                warning: 'bg-yellow-500',
                info: 'bg-blue-500'
            };

            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-4 rounded-xl shadow-lg z-50 notification max-w-sm`;
            notification.innerHTML = `
                <div class="flex items-center space-x-3">
                    <span class="flex-shrink-0">${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è'}</span>
                    <span class="flex-1">${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="flex-shrink-0 text-white hover:text-gray-200">
                        ‚úï
                    </button>
                </div>
            `;
            document.body.appendChild(notification);

            setTimeout(() => {
                if (document.body.contains(notification)) {
                    notification.style.animation = 'slideInRight 0.3s ease-out reverse';
                    setTimeout(() => {
                        if (document.body.contains(notification)) {
                            document.body.removeChild(notification);
                        }
                    }, 300);
                }
            }, 5000);
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Enter key for login
            document.getElementById('adminPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    adminLogin();
                }
            });

            // Auto-set today's date for voucher expiry
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('voucherExpiry').value = today;

            // Close modals when clicking outside
            document.getElementById('githubModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeGitHubModal();
                }
            });
        });

        // Initialize counters from existing data
        function initializeCounters() {
            const data = loadDataFromStorage();
            
            if (data.products.length > 0) {
                productIdCounter = Math.max(...data.products.map(p => p.id)) + 1;
            }
            if (data.vouchers.length > 0) {
                voucherIdCounter = Math.max(...data.vouchers.map(v => v.id)) + 1;
            }
            if (data.flashSales.length > 0) {
                flashSaleIdCounter = Math.max(...data.flashSales.map(s => s.id)) + 1;
            }
            if (data.categories.length > 0) {
                categoryIdCounter = Math.max(...data.categories.map(c => c.id)) + 1;
            }
            
            // Initialize category product counter
            Object.values(data.categoryProducts).forEach(products => {
                if (products.length > 0) {
                    categoryProductIdCounter = Math.max(categoryProductIdCounter, ...products.map(p => p.id)) + 1;
                }
            });
        }

        // Initialize on load
        initializeCounters();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9743b986f3db1fb6',t:'MTc1NjA0NzY4NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
